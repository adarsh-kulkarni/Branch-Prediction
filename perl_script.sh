#!/bin/sh
#####################################################################
# go.sh
# Generated by bench-run.pl
# /home/students/adku7025/benchmarks/bin/bench-run.pl --bench spec-cpu2006:int:400.perlbench:ref --build base --prefix pin -t obj-intel64/checkpoint1A.so -o perl_1bit.out -l 10000000000 -- --copy output.out --log LOG
#####################################################################

#####################################################################
# Creating logfile
date >> LOG
#####################################################################

#####################################################################
# benchmark: spec-cpu2006/int/400.perlbench input: ref 0
#####################################################################
# log file update
echo -n "Started : spec-cpu2006/int/400.perlbench input: ref 0 at " >> LOG 
date >> LOG
# setup
ln -s /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/builds/base/400.perlbench /home/students/adku7025/checkpoint-1A/400.perlbench
ln -s -f -n --target-directory=/home/students/adku7025/checkpoint-1A /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/ref/input/checkspam.in /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/ref/input/checkspam.pl /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/ref/input/diffmail.in /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/ref/input/splitmail.in /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/all/input/cpu2006_mhonarc.rc /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/all/input/diffmail.pl /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/all/input/lib /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/all/input/rules /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/data/all/input/splitmail.pl
# setup experiment files
# run benchmark
pin -t obj-intel64/checkpoint1A.so -o perl_1bit.out -l 100000000 -- /home/students/adku7025/checkpoint-1A/400.perlbench -I./lib checkspam.pl 2500 5 25 11 150 1 1 1 1 > checkspam.2500.5.25.11.150.1.1.1.1.out 2> checkspam.2500.5.25.11.150.1.1.1.1.err 
# verify benchmark
# post-copy benchmark
cp /home/students/adku7025/checkpoint-1A/output.out /home/students/adku7025/benchmarks/src/spec-cpu2006/int/400.perlbench/builds/base/output.out;
# run custom script
# clean benchmark
rm -f /home/students/adku7025/checkpoint-1A/400.perlbench
rm -r -f checkspam.in checkspam.pl diffmail.in splitmail.in cpu2006_mhonarc.rc diffmail.pl lib rules splitmail.pl checkspam.2500.5.25.11.150.1.1.1.1.err checkspam.2500.5.25.11.150.1.1.1.1.out diffmail.4.800.10.17.19.300.err diffmail.4.800.10.17.19.300.out spamassassin splitmail.1600.12.26.16.4500.err splitmail.1600.12.26.16.4500.out
# clean experiment files
# log file update
echo -n "Finished: spec-cpu2006/int/400.perlbench input: ref 0 at " >> LOG 
date >> LOG
#####################################################################
# Finishing logfile
date >> LOG
#####################################################################

